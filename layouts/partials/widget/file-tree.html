{{/*
    file-tree.html – collapsible tree showing only content under /posts/
    Place in layouts/partials/file-tree.html or themes/<theme>/...
  */}}
  
  {{- $current := .Page -}}
  {{- $posts := site.GetPage "section" "posts" -}}
  {{- if $posts -}}
  <nav class="file-tree" aria-label="Posts navigation">
    <details class="tree-node-root" {{ if or (eq $current.Section "posts") (strings.HasPrefix $current.RelPermalink "/posts/") }}open{{ end }}>
      <summary class="tree-label-root">Posts</summary>
      <ul class="tree-children">
        {{/* list direct pages under /posts/ (weight → title) */}}
        {{- range sort $posts.Pages "Weight" "Title" }}
          {{- if not .IsSection }}
          <li class="tree-leaf">
            <a href="{{ .RelPermalink }}" {{ if eq $current.RelPermalink .RelPermalink }}class="active"{{ end }}>
              {{ .Title }}
            </a>
          </li>
          {{- end }}
        {{- end }}
  
        {{/* recursively list sub‑sections inside /posts/ */}}
        {{- range sort $posts.Sections "Weight" "Title" }}
          {{ partial "file-tree/section" (dict "Section" . "Current" $current) }}
        {{- end }}
      </ul>
    </details>
  </nav>
  {{- end }}
  
  {{/* --- styles (move to scss if preferred) --- */}}
  <style>
  .file-tree { font-family: var(--font-body, sans-serif); line-height: 1.4; }
  .tree-label-root { font-weight:700; cursor:pointer; }
  .tree-children, .tree-node-root { list-style:none; margin:0; padding:0; }
  .tree-leaf a { display:block; padding-left:1.25rem; color:var(--c-text,#555); text-decoration:none; }
  .tree-leaf a.active { font-weight:700; color:var(--c-link-active,#222); }
  
  .tree-node-root > summary { list-style:none; cursor:pointer; }
  .tree-node-root > summary::-webkit-details-marker { display:none; }
  .tree-node-root[open] > summary:before { transform:rotate(90deg); }
  .tree-node-root > summary:before { content:"›"; display:inline-block; width:1rem; transition:transform .2s ease; }
  </style>
  